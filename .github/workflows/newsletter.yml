- name: Run newsletter generator
  run: python newsletter_generator.py

- name: Commit newsletter files if changed
  uses: stefanzweifel/git-auto-commit-action@v5
  with:
    commit_message: "Update newsletters ${{ github.run_id }} — $(date +'%Y-%m-%d %H:%M:%S KST')"
    file_pattern: |
      newsletter.html
      newsletter2.html
      data/*.json
      data/index.json
      news2.json
    commit_user_name: github-actions[bot]
    commit_user_email: github-actions[bot]@users.noreply.github.com
    commit_author: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
    push_options: '--force-with-lease'   # 필요 시 (거의 안 씀)
